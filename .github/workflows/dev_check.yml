name: âš¡ Dev Check (å¼€å‘ç¯å¢ƒæ£€æŸ¥)

on:
  push:
    branches:
      - 'feat/**'
      - 'fix/**'
  pull_request:
    branches:
      - 'feat/**'
      - 'fix/**'

jobs:
  quick-check:
    name: âš¡ Quick Scan (å¿«é€Ÿæ‰«æ)
    runs-on: ubuntu-latest
    steps:
      - name: ğŸ“¥ Checkout Code
        uses: actions/checkout@v4
        with:
          fetch-depth: 0

      # ã€æ–°å¢ã€‘
      - name: ğŸ“¦ Install pnpm
        uses: pnpm/action-setup@v4
        with:
          version: 9

      # ã€ä¿®æ”¹ã€‘
      - name: ğŸŸ¢ Setup Node.js
        uses: actions/setup-node@v4
        with:
          node-version: '22'
          cache: 'pnpm'

      # ã€ä¿®æ”¹ã€‘
      - name: ğŸ“¦ Install Dependencies
        run: pnpm install --frozen-lockfile

      - name: ğŸ¨ Check Formatting
        # ç¡®ä¿ä½ æœ‰ pnpm run format å‘½ä»¤
        run: |
          pnpm prettier --check "src/**/*.ts" || echo "âš ï¸ Warning: Code style issues found. Please run 'pnpm run format'."

      - name: ğŸ§¹ Lint Check
        run: pnpm run lint

      - name: ğŸ› ï¸ TS Build Check
        run: pnpm run build

      - name: ğŸ”‘ Gitleaks Secret Scan
        uses: gitleaks/gitleaks-action@v2
        env:
          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}