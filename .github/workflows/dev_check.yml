name: âš¡ Dev Check (å¼€å‘ç¯å¢ƒæ£€æŸ¥)

# è§¦å‘è§„åˆ™ï¼š
# åŒ¹é… feat/* æˆ– fix/* å¼€å¤´çš„åˆ†æ”¯æ¨é€
on:
  push:
    branches:
      - 'feat/**'
      - 'fix/**'
  pull_request:
    branches:
      - 'feat/**'
      - 'fix/**'

jobs:
  quick-check:
    name: âš¡ Quick Scan (å¿«é€Ÿæ‰«æ)
    runs-on: ubuntu-latest
    steps:
      - name: ğŸ“¥ Checkout Code
        uses: actions/checkout@v4
        with:
          fetch-depth: 0

      - name: ğŸŸ¢ Setup Node.js
        uses: actions/setup-node@v4
        with:
          node-version: '22'
          cache: 'npm'

      - name: ğŸ“¦ Install Dependencies
        run: npm ci

      # å¼€å‘è€…åœ¨å†™ä»£ç æ—¶ç»å¸¸å¿˜æ ¼å¼åŒ–ï¼Œè¿™é‡Œåªè­¦å‘Šä¸æŠ¥é”™ï¼Œæˆ–è€…ä½ å¯ä»¥é€‰æ‹©æŠ¥é”™
      - name: ğŸ¨ Check Formatting
        run: |
          npx prettier --check "src/**/*.ts" || echo "âš ï¸ Warning: Code style issues found. Please run 'npm run format'."

      - name: ğŸ› ï¸ TS Build Check (TSç¼–è¯‘æ£€æŸ¥)
        # è¿™æ˜¯å¿…é¡»çš„ï¼Œç¡®ä¿ä½ çš„æ”¹åŠ¨æ²¡æœ‰ç ´åä»£ç é€»è¾‘
        run: npm run build

      - name: ğŸ”‘ Gitleaks Secret Scan (å¯†é’¥æ³„éœ²æ‰«æ)
        # è¿™ä¸€æ­¥ä¸èƒ½çœï¼Œå¼€å‘åˆ†æ”¯æ³„éœ²äº†å¯†ç ä¹Ÿå¾ˆå±é™©
        uses: gitleaks/gitleaks-action@v2
        env:
          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}